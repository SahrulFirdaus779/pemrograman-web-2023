<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>validation form</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <style>
      body{
        background-image: linear-gradient(to top, #b3ffab 0%,  #12fff7 50%,  #1dbf73 100%);
      }
      .error {
        color: red;
      }
      table,
      th,
      td {
        border: 1.5px solid black;
        border-collapse: collapse;
        text-align: center;
      }
      th {
        text-align: left;
      }
    </style>
  </head>
  <body>
    <br>
    <h3 align="center"> Form Registrasi</h3>
    <br>
    <form name="form" class="m-4" action="javascript:void(0);">
      <div class="form-group row" style="display: flex">
        <label for="Username" class="offset-3 col-2 col-form-label"
          >Username</label
        >
        <div class="col-4">
          <input
            id="Username"
            name="text"
            type="text"
            class="form-control"
            style="display: flex"
          />
        </div>
        <span class="error" id="namaError"></span>
      </div>
      <div class="form-group row" style="display: flex">
        <label for="email" class="offset-3 col-2 col-form-label">Email</label>
        <div class="col-4">
          <input id="email" name="text1" type="text" class="form-control" />
        </div>
        <span class="error" id="emailError"></span>
      </div>
      <div class="form-group row" style="display: flex">
        <label for="jam_berangkat" class="offset-3 col-2 col-form-label"
          >Jam Keberangkatan</label
        >
        <div class="col-4">
          <input
            id="jam_berangkat"
            name="text2"
            type="text"
            class="form-control"
            placeholder="00:00"
          />
        </div>
        <span class="error" id="jamError"></span>
      </div>
      <div class="form-group row" style="display: flex">
        <label for="tujuan_berangkat" class="offset-3 col-2 col-form-label"
          >Tujuan Keberangkatan</label
        >
        <div class="col-4">
          <input id="tujuan_berangkat" name="text3" type="text" class="form-control" />
        </div>
        <span class="error" id="tujuanError"></span>
      </div>
      <div class="form-group row" style="display: flex">
        <label for="tiket" class="offset-3 col-2 col-form-label"
          >Jumlah Tiket</label
        >
        <div class="col-4">
          <input id="tiket" name="text4" type="number" class="form-control" />
        </div>
        <span class="error" id="jumlahError"></span>
      </div>
      <div class="form-group row">
        <div class="offset-5 col-8">
          <button
            name="submit"
            type="submit"
            class="btn btn-primary"
            onclick="return hasil()"
          >
            Submit
          </button>
        </div>
      </div>
    </form>
    <hr />
    <center>
      <span id="buatTable"> </span>
    </center>
    <script>
      function hasil() {
        let nama = document.forms["form"]["Username"].value;
        let email = document.forms["form"]["email"].value;
        let jam = document.forms["form"]["jam_berangkat"].value;
        let tujuan = document.forms["form"]["tujuan_berangkat"].value;
        let jumlah = document.forms["form"]["tiket"].value;
        let emailValid =
          /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        let jamValid = /^([0-1][0-9]|2[0-3]):([0-5][0-9])$/;
        if (nama.length > 30) {
          document.getElementById("namaError").textContent = "Error";
          document.forms["form"]["Username"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nNama melebihi 30 karakter");
        } else if (nama == "") {
          document.getElementById("namaError").textContent = "Error";
          document.forms["form"]["Username"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nNama harus diisi");
        } else if (email == "") {
          document.getElementById("emailError").textContent = "Error";
          document.forms["form"]["email"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nEmail harus diisi");
        } else if (!email.match(emailValid)) {
          document.getElementById("emailError").textContent = "Error";
          document.forms["form"]["email"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nFormat email tidak sesuai");
        } else if (jam == "") {
          document.getElementById("jamError").textContent = "Error";
          document.forms["form"]["jam_berangkat"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nJam harus diisi");
        } else if (!jam.match(jamValid)) {
          document.getElementById("jamError").textContent = "Error";
          document.forms["form"]["jam_berangkat"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nFormat jam tidak sesuai");
        } else if (tujuan == "") {
          document.getElementById("tujuanError").textContent = "Error";
          document.forms["form"]["tujuan_berangkat"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nTujuan harus diisi");
        } else if (jumlah == "") {
          document.getElementById("jumlahError").textContent = "Error";
          document.forms["form"]["tiket"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nJumlah tiket harus diisi");
        } else if (jumlah < 1 || jumlah > 10) {
          document.getElementById("jumlahError").textContent = "Error";
          document.forms["form"]["tiket"].value = "";
          document.getElementById("table").innerHTML = "";
          alert("Data tidak valid\nLimit jumlah tiket 1 - 10");
        } else {
          document.getElementById("buatTable").innerHTML =
            '<table id="table"><tr><th>Username</th><td><span id="nama2">' +
            nama +
            '</span></td></tr><tr><th>Email</th><td><span id="email2">' +
            email +
            '</span></td></tr><tr><th>Jam Keberangkatan</th><td><span id="jam2">' +
            jam +
            '</span></td></tr> <tr><th>Tujuan Keberangkatant</th><td><span id="tujuan2">' +
            tujuan +
            '</span></td></tr><tr><th>Jumlah Tiket</th><td><span id="jumlah2">' +
            jumlah +
            "</span></td></tr>";
          document.getElementById("namaError").textContent = "";
          document.getElementById("emailError").textContent = "";
          document.getElementById("jamError").textContent = "";
          document.getElementById("tujuanError").textContent = "";
          document.getElementById("jumlahError").textContent = "";
        }
      }
    </script>
  </body>
</html>
